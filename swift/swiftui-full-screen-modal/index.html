<!DOCTYPE html><html lang="en"><meta name="viewport" content="width=device-width, initial-scale=1.0"></meta><head><meta charset="UTF-8"/><meta name="og:site_name" content="Just Code with Khanh"/><link rel="canonical" href="https://justcodewithkhanh.com/swift/swiftui-full-screen-modal"/><meta name="twitter:url" content="https://justcodewithkhanh.com/swift/swiftui-full-screen-modal"/><meta name="og:url" content="https://justcodewithkhanh.com/swift/swiftui-full-screen-modal"/><title>SwiftUI: Full Screen Modal | Just Code with Khanh</title><meta name="twitter:title" content="SwiftUI: Full Screen Modal | Just Code with Khanh"/><meta name="og:title" content="SwiftUI: Full Screen Modal | Just Code with Khanh"/><meta name="description" content="Making a full screen modal with ViewModifier"/><meta name="twitter:description" content="Making a full screen modal with ViewModifier"/><meta name="og:description" content="Making a full screen modal with ViewModifier"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Just Code with Khanh"/><meta name="twitter:image" content="https://justcodewithkhanh.com/img/logo_with_background.jpg"/><meta name="og:image" content="https://justcodewithkhanh.com/img/logo_with_background.jpg"/></head><body class="item-page"><div id="header"><div class="wrapper"><div class="inner"><div class="logo"><a href="/"><img src="/img/logo_expand.png"/></a><p class="description">Learning by doing. Just start coding!!! üë®üèª‚Äçüíª</p></div><nav><ul><li class="nav-swift"><a class="selected" href="/swift">Swift</a></li><li class="nav-leetcode"><a href="/leetcode">LeetCode</a></li><li class="nav-aboutme"><a href="/aboutMe">About Me</a></li></ul></nav></div></div></div><div id="main"><div class="wrapper"><div class="inner"><article><div class="content"><div class="iframe-container">
    <iframe src="https://www.youtube.com/embed/4jnwugRRgwo" frameborder="0" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div><h1><strong>SwiftUI: Full Screen Modal</strong></h1><p><strong><em>Currently work with Xcode 11.4, Swift 5</em></strong></p><p>SwiftUI provides a <code>sheet</code> view that allows for a transition bottom animation overlaying the current view. This useful if you want to quickly display certain content and conveniently use dragging gestures to close. One flaw of <code>sheet</code> is not able to take advantage of the full screen. So in this post, we will be making a full modal view the behave like <code>sheet</code>.</p><h3><strong>We start with making our view structure</strong></h3><p>Our modal simplest structure is to a <strong>ZStack</strong> to make an overlay on current content.</p><pre data-language="swift"><code><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Modal</span>&lt;<span class="hljs-title">Content</span> : <span class="hljs-title">View</span>, <span class="hljs-title">Destination</span> : <span class="hljs-title">View</span>&gt; : <span class="hljs-title">View</span> </span>{
    @<span class="hljs-type">Binding</span> <span class="hljs-keyword">var</span> isPresented : <span class="hljs-type">Bool</span>
    <span class="hljs-keyword">var</span> transitionType : <span class="hljs-type">ModalTransition</span>
    <span class="hljs-keyword">var</span> content : <span class="hljs-type">Content</span>
    <span class="hljs-keyword">var</span> destination : <span class="hljs-type">Destination</span>
    
    <span class="hljs-keyword">init</span>(isPresent : <span class="hljs-type">Binding</span>&lt;<span class="hljs-type">Bool</span>&gt;
        ,@<span class="hljs-type">ViewBuilder</span> content : () -&gt; <span class="hljs-type">Content</span>, 
        @<span class="hljs-type">ViewBuilder</span> destination : () -&gt; <span class="hljs-type">Destination</span>) {
        <span class="hljs-keyword">self</span>._isPresented = isPresent
        <span class="hljs-keyword">self</span>.transitionType = transitionType
        <span class="hljs-keyword">self</span>.content = content()
        <span class="hljs-keyword">self</span>.destination = destination()
    }
    
    <span class="hljs-keyword">var</span> body : some <span class="hljs-type">View</span> {
        <span class="hljs-type">ZStack</span> {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.isPresented {
                destination
            } <span class="hljs-keyword">else</span> {
                content
            }
        }
    }
}
</code></pre><p>The <code>Modal View</code> takes in 3 parameters.</p><ol><li>1.<strong>isPresented</strong> : use to trigger when to make the modal appear/disappear. This value uses <code>@Binding</code> to trigger a redraw in parent view when the value change.</li><li>2.<strong>content</strong> : A view that contains the content of your home.</li><li>3.<strong>destination</strong> : A view use for our modal content.</li></ol><p>Our <code>destination</code> view will show up when <code>isPresented</code> is true, else we display the home content. In the <code>ContentView</code>, we can initiate the <code>Modal</code> with:</p><pre data-language="swift"><code><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentView</span>: <span class="hljs-title">View</span> </span>{
    @<span class="hljs-type">State</span> <span class="hljs-keyword">var</span> isPresented  = <span class="hljs-literal">false</span>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">Modal</span>(isPresent: <span class="hljs-keyword">self</span>.$isPresented, content: {
            <span class="hljs-type">Text</span>(<span class="hljs-string">"home"</span>).onTapGesture {
                <span class="hljs-keyword">self</span>.isPresented.toggle()
            }
        }) {
            <span class="hljs-type">Text</span>(<span class="hljs-string">"modal"</span>).onTapGesture {
                <span class="hljs-keyword">self</span>.isPresented.toggle()
            }
        }
        
    }
}
</code></pre><p>I use a simple <code>Text</code> view that triggers <code>isPresented</code> to toggle modal when tap onto the text. However, the animation is very "choppy" so we will add transition and animation. Now go back to the <code>Modal</code> view and add code below.</p><pre data-language="swift"><code><span class="hljs-comment">// Modal View</span>
<span class="hljs-keyword">var</span> body : some <span class="hljs-type">View</span> {
    <span class="hljs-type">ZStack</span> {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.isPresented {
            destination.transition(.move(edge: .bottom)).animation(.linear).edgesIgnoringSafeArea(.all) <span class="hljs-comment">// 1 </span>
        } <span class="hljs-keyword">else</span> {
            content.transition(.move(edge: .bottom)).animation(.linear) <span class="hljs-comment">// 2</span>
        }
    }
}
</code></pre><p>Notice the use of <code>edgesIgnoringSafeArea(.all)</code> to make the modal go full screen.</p><h3><strong>Making our Modal conform to ViewModifier</strong></h3><p>For us to call our modal like how we would call a <code>sheet</code>, we have to conform our <code>Modal</code> view to <code>ViewModifier</code>, which allows us to modify the parent view with another view.</p><pre data-language="swift"><code><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ModalViewModifier</span>&lt;<span class="hljs-title">Destination</span> : <span class="hljs-title">View</span>&gt; : <span class="hljs-title">ViewModifier</span> </span>{
    @<span class="hljs-type">Binding</span> <span class="hljs-keyword">var</span> isPresented : <span class="hljs-type">Bool</span>
    <span class="hljs-keyword">var</span> destination : () -&gt; <span class="hljs-type">Destination</span>
    
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">body</span><span class="hljs-params">(content : <span class="hljs-keyword">Self</span>.Content)</span></span> -&gt; some <span class="hljs-type">View</span> {
        <span class="hljs-type">Modal</span>(isPresent: <span class="hljs-keyword">self</span>.$isPresented, content: { content }) {
            <span class="hljs-keyword">self</span>.destination()
        }
    }
}
</code></pre><p>The <code>ModalViewModifier</code> structure is very closely to our <code>Modal</code> view. Notice that there isn't a <code>content</code> view as we will pass it from the parent.</p><p>Next is to write a <code>extension</code> function that extend from <code>View</code> :</p><pre data-language="swift"><code><span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">View</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">modalSheet</span>&lt;Destination : View&gt;<span class="hljs-params">(isPresented : Binding&lt;Bool&gt;, destination : @escaping <span class="hljs-params">()</span></span></span> -&gt; <span class="hljs-type">Destination</span>) -&gt; some <span class="hljs-type">View</span> {

        <span class="hljs-keyword">self</span>.modifier(<span class="hljs-type">ModalViewModifier</span>(isPresented: isPresented, 
                                        destination: destination))
    }
}
</code></pre><p>Once the <code>modalSheet</code> function is available, you can now to back to the <code>Content</code> view and call our <code>Modal</code> view like how we would call a <code>sheet</code> view.</p><pre data-language="swift"><code><span class="hljs-comment">// Content View</span>
<span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">ZStack</span>{
            ...
            <span class="hljs-comment">// Home content</span>
            ...
        }
        <span class="hljs-comment">// Here modalSheet can be call same way as sheet</span>
        .modalSheet(isPresented: <span class="hljs-keyword">self</span>.$isPresented, transitionType: <span class="hljs-type">ModalTransition</span>.slide) {
            ...
            <span class="hljs-comment">// Modal Content to display</span>
            ...
        }
    }
</code></pre><h3><strong>Extra Content</strong></h3><p>In case you want to do more with animation than just sliding from the bottom, we adding another parameter to modal that specifies what type of transition to use.</p><p>Let's declare our transition object that conforms to <code>AnyTransition</code> protocol.</p><pre data-language="swift"><code><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">TransitionType</span> </span>{
    <span class="hljs-keyword">var</span> transition : <span class="hljs-type">AnyTransition</span> { <span class="hljs-keyword">get</span> }
}

<span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">ModalTransition</span> : <span class="hljs-title">TransitionType</span> </span>{
    <span class="hljs-keyword">case</span> edgeBottom, edgeTop, slide
    
    <span class="hljs-keyword">var</span> transition: <span class="hljs-type">AnyTransition</span> {
        <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span> {
        <span class="hljs-keyword">case</span> .edgeBottom:
            <span class="hljs-keyword">return</span> .move(edge: .bottom)
        <span class="hljs-keyword">case</span> .edgeTop:
            <span class="hljs-keyword">return</span> .move(edge: .top)
        <span class="hljs-keyword">case</span> .slide:
            <span class="hljs-keyword">return</span> .slide
        }
    }
}
</code></pre><p>In switch case, you can add as many transition as available in SwiftUI. I will just stick with 3 simple transitions.</p><p>Next is to make <code>ModalTransition</code> available in our <code>Modal</code> view.</p><pre data-language="swift"><code><span class="hljs-comment">// Add variable to Modal</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Modal</span>&lt;<span class="hljs-title">Content</span> : <span class="hljs-title">View</span>, <span class="hljs-title">Destination</span> : <span class="hljs-title">View</span>&gt; : <span class="hljs-title">View</span> </span>{
    ...
    <span class="hljs-keyword">var</span> transitionType : <span class="hljs-type">ModalTransition</span>
    ...
    
    <span class="hljs-keyword">init</span>(isPresent : <span class="hljs-type">Binding</span>&lt;<span class="hljs-type">Bool</span>&gt;, transitionType : <span class="hljs-type">ModalTransition</span> = .edgeBottom,@<span class="hljs-type">ViewBuilder</span> content : () -&gt; <span class="hljs-type">Content</span>, @<span class="hljs-type">ViewBuilder</span> destination : () -&gt; <span class="hljs-type">Destination</span>) {
        ...
        <span class="hljs-keyword">self</span>.transitionType = transitionType
        ...
    }
}

<span class="hljs-comment">// Add variable to ModalViewModifier</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ModalViewModifier</span>&lt;<span class="hljs-title">Destination</span> : <span class="hljs-title">View</span>&gt; : <span class="hljs-title">ViewModifier</span> </span>{
    ...
    <span class="hljs-keyword">var</span> transitionType : <span class="hljs-type">ModalTransition</span>
    ...
    
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">body</span><span class="hljs-params">(content : <span class="hljs-keyword">Self</span>.Content)</span></span> -&gt; some <span class="hljs-type">View</span> {
        <span class="hljs-comment">// Pass the transition to Modal view init</span>
        <span class="hljs-type">Modal</span>(isPresent: <span class="hljs-keyword">self</span>.$isPresented, transitionType: <span class="hljs-keyword">self</span>.transitionType, content: { content }) {
            <span class="hljs-keyword">self</span>.destination()
        }
    }
}

<span class="hljs-comment">// Add parameter to extension</span>
<span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">View</span> </span>{
    <span class="hljs-comment">// Add here</span>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">modalSheet</span>&lt;Destination : View&gt;<span class="hljs-params">(isPresented : Binding&lt;Bool&gt;, transitionType : ModalTransition, destination : @escaping <span class="hljs-params">()</span></span></span> -&gt; <span class="hljs-type">Destination</span>) -&gt; some <span class="hljs-type">View</span> {
        <span class="hljs-comment">// Add here to conform to ModalViewModifier init</span>
        <span class="hljs-keyword">self</span>.modifier(<span class="hljs-type">ModalViewModifier</span>(isPresented: isPresented, transitionType: transitionType, destination: destination))
    }
}
</code></pre><p>Go back to our <code>Content</code> view to fill out the missing parameter.</p><pre data-language="swift"><code><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentView</span>: <span class="hljs-title">View</span> </span>{
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        ...
        <span class="hljs-comment">// Using a slide transition here or any desired transition that declared</span>
        <span class="hljs-comment">// in ModalTransition</span>
        .modalSheet(isPresented: <span class="hljs-keyword">self</span>.$isPresented, transitionType: <span class="hljs-type">ModalTransition</span>.slide) {
            ...
        }
    }
}
</code></pre><p>There you go. You have a fully working full screen modal. This also works with the tab view. You can replicate <code>sheet</code> even further by adding <code>gesture</code> for swipe down to dismiss. Thank you for reading. üòä</p></div><span>Tagged with: </span><ul class="tag-list"><li class="color-d"><a href="/tags/swift">swift</a></li><li class="color-a"><a href="/tags/swiftui">swiftui</a></li></ul></article></div></div><div><a class="pagination next" href="/swift/making-a-simple-nfc-app-part-1">Making a Simple NFC App Part 1</a></div></div><footer id="footer"><div class="wrapper"><div class="inner"><p><img id="profile" src="/img/profile_img_circle.png" alt="Khanh"/></p><p>üë®üèª‚Äçüíª A Swift and SwiftUI fan. üìö</p><p>Copyright ¬© Khanh N 2020. All rights reserved.</p><p>Generated using <a href="https://github.com/johnsundell/publish">Publish.</a></p></div></div></footer></body></html>